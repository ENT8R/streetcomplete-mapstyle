import:
  - https://raw.githubusercontent.com/ENT8R/streetcomplete-mapstyle/master/global.yaml
#import:
  #- global.yaml

layers:
    #Everything which is not water
    earth:
        data: { source: mapzen }
        draw:
            polygons:
                order: function() { return feature.sort_rank; }
                color: global.earth_color

    #Everything which is water
    water:
        data: { source: mapzen, layer: water }
        water_lines:
            filter:
                all:
                    - $geometry: line
                    - kind: [river, canal, stream, dam, ditch, drain]
                    - not: {is_tunnel: true}
                any:
                    - $zoom: { min: 13 }
                    - kind: [river, canal]
            draw:
                lines:
                    order: function() { return feature.sort_rank; }
                    color: global.water_color
                    width: [[13, 1px], [14, 1.5px], [15, 2px], [16, 3px], [18, 4m]]
                    cap: round

        water_areas:
            draw:
                polygons:
                    order: function() { return feature.sort_rank; }
                    color: global.water_color

    landuse:
        data: { source: mapzen }
        draw:
            polygons:
                order: function() { return feature.sort_rank; }
                color: global.landuse_color

    #All buildings
    buildings:
        data: { source: mapzen }
        filter: {$zoom: { min: 16 }, not: { location: underground }}

        draw:
            polygons:
                order: function() { return feature.sort_rank; }
                color: global.building_color
            lines:
                order: function() { return feature.sort_rank; }
                color: global.building_outline
                width: [[14, 0px], [15, 1px], [18, 1px], [19, 0.4m]]

        3d-buildings:
            draw:
                polygons:
                    extrude: function () { return feature.height > 20 || $zoom >= 16; }

        address-labels:
            filter:
                all:
                    - $zoom: { min: 19 }
                any:
                    - kind: address
                    - { label_position: true, addr_housenumber: true, name: false }
            draw:
                text:
                    order: function() { return feature.sort_rank; }
                    text_source: addr_housenumber
                    font:
                        fill: global.text_fill_color
                        family: global.text_font_family
                        size: 12px
                        stroke: global.text_stroke
